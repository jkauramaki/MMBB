<!DOCTYPE html>
<html>
  <head>
    <title>MMBB batery</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" />

    <script src="jatos.js"></script>

    <script src="./utils/preventRefresh.js"> </script>
    <script src="./utils/studyLinks.js"> </script>

    <script src="https://unpkg.com/jspsych@7.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-audio-keyboard-response@1.1.0"></script>
    <script src="./jspsych/dist/plugin-audio-button-response.js"> </script>
    <script src="./jspsych/dist/plugin-html-slider-response-multiple.js"> </script>
    <script src="./jspsych/dist/plugin-fullscreen.js"> </script>
    <script src="./jspsych/dist/plugin-html-button-response.js"> </script>
    <script src="./jspsych/dist/plugin-survey-html-form.js"> </script>
    <script src="./jspsych/dist/plugin-image-slider-response.js"> </script>
    <script src="./jspsych/dist/plugin-image-button-response.js"> </script>
    <script src="./jspsych/dist/plugin-instructions.js"> </script>
    <script src="./jspsych/dist/plugin-free-sort.js"> </script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.2"></script>
    <script src="./jspsych/dist/plugin-canvas-button-response.js"> </script>
    <script src="./jspsych/dist/extension-accelerometer.js"> </script>
    <script src="./jspsych/dist/plugin-html-keyboard-response.js"> </script>
    <script src="./jspsych/dist/plugin-survey-multi-choice.js"> </script>
    <script src="./jspsych/dist/plugin-initialize-microphone.js"> </script>
    <script src="./jspsych/dist/plugin-html-audio-response.js"> </script>
    <script src="./jspsych/dist/plugin-survey.js"></script>
    <script src="./utils/translations.js"></script>

    <script src="./src/batteries/questionnaires.js"> </script>
    <script src="./src/batteries/sharedMeasurements.js"> </script>
    <script src="./jspsych/dist/custom/utils.js"></script>

    <script src="./utils/preventRefresh.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/jspsych@7.1.2/css/jspsych.css">
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@0.2.0/css/survey.css">

    <link rel="stylesheet" href="./src/styles/surveyStyles.css">

    <script src="./backend/pushDatabase.js"></script>

  </head>
  <body></body>
  <script>

    jatos.onLoad(() => {

      var jsPsych = initJsPsych({
        on_finish: function() {
          var finalData = jsPsych.data.get()
        }
      });

      var similarity = {
        type: jsPsychHtmlMultiSliderResponse,
        stimulus: ["", ""],
        nSliders: 2,
        emojis: [["<div id='labelWrapEmotion'><img id='newEmotionEmoji' src='./images/emotion/newEmojis/sad.png'</img> <div id='emotionText'>" + "0 Not at all" + "</div></div>", 
                  "<div id='labelWrapEmotion'><img id='newEmotionEmoji' src='./images/emotion/newEmojis/happy.png'</img> <div id='emotionText'>" + 1 + "</div></div>"],
                 ["<div id='labelWrapEmotion'><img id='newEmotionEmoji' src='./images/emotion/newEmojis/sleepy.png'</img> <div id='emotionText'>" + 2 + "</div></div>", 
                  "<div id='labelWrapEmotion'><img id='newEmotionEmoji' src='./images/emotion/newEmojis/surprised.png'</img> <div id='emotionText'>" + "3 Very much" + "</div></div>"]
        ],
        require_movement: true,
        button_label: recurring['continue'][lang],
        labels: [[],[],[]],
        prompt: "Rate similarity",
        on_load: function(){
          document.getElementById("jspsych-content").style.fontSize = "110%";
          document.getElementById("jspsych-content").style.height = "80vh";
          document.querySelector(".jspsych-content-wrapper").style.display = "block"
          document.querySelectorAll(".jspsych-html-slider-response-container").forEach(
            function(i) {
              i.style.justifyContent = 'center'
              i.style.width = '85%'
            }
          )
        },
      };

      jsPsych.run([similarity]);


    })

 </script>
</html>
